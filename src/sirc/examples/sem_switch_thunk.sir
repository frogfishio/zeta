unit u0 target host +fun:v1 +sem:v1

type I32Sig = fn() -> i32
type I32Fun = fun(I32Sig)

fn good() -> i32
  return 7:i32
end

fn bad() -> i32
  term.trap code "trap"
end

fn main() -> i32 public
  let tg: I32Fun = fun.sym() name "good" as I32Fun
  let tb: I32Fun = fun.sym() name "bad" as I32Fun
  return sem.switch(
    1:i32,
    cases: [
      { lit: 1:i32, body: thunk tg }
    ],
    default: thunk tb
  ) as i32
end

