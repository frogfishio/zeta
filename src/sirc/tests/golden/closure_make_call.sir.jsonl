{"ir":"sir-v1.0","k":"meta","producer":"sirc","unit":"u0","ext":{"features":["fun:v1","closure:v1"]}}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:3:22","file":"closure_make_call.sir","line":3,"col":22,"text":"type CallSig = fn(i32) -> i32"}
{"ir":"sir-v1.0","k":"type","id":"prim:i32","kind":"prim","prim":"i32","loc":{"line":3,"col":22,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:3:22"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:4:1","file":"closure_make_call.sir","line":4,"col":1,"text":"type CodeSig = fn(i32, i32) -> i32"}
{"ir":"sir-v1.0","k":"type","id":"fn(prim:i32)->prim:i32","kind":"fn","params":["prim:i32"],"ret":"prim:i32","loc":{"line":4,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:4:1"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:5:1","file":"closure_make_call.sir","line":5,"col":1,"text":"type CodeFun = fun(CodeSig)"}
{"ir":"sir-v1.0","k":"type","id":"fn(prim:i32,prim:i32)->prim:i32","kind":"fn","params":["prim:i32","prim:i32"],"ret":"prim:i32","loc":{"line":5,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:5:1"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:5:27","file":"closure_make_call.sir","line":5,"col":27,"text":"type CodeFun = fun(CodeSig)"}
{"ir":"sir-v1.0","k":"type","id":"fun(fn(prim:i32,prim:i32)->prim:i32)","kind":"fun","sig":"fn(prim:i32,prim:i32)->prim:i32","loc":{"line":5,"col":27,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:5:27"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:6:32","file":"closure_make_call.sir","line":6,"col":32,"text":"type Cls = closure(CallSig, i32)"}
{"ir":"sir-v1.0","k":"type","id":"closure(fn(prim:i32)->prim:i32,prim:i32)","kind":"closure","callSig":"fn(prim:i32)->prim:i32","env":"prim:i32","loc":{"line":6,"col":32,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:6:32"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:8:23","file":"closure_make_call.sir","line":8,"col":23,"text":"fn sir_add_env(env:i32, x:i32) -> i32"}
{"ir":"sir-v1.0","k":"node","id":"n:8:0","tag":"param","type_ref":"prim:i32","fields":{"name":"env"},"loc":{"line":8,"col":23,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:8:23"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:8:30","file":"closure_make_call.sir","line":8,"col":30,"text":"fn sir_add_env(env:i32, x:i32) -> i32"}
{"ir":"sir-v1.0","k":"node","id":"n:8:1","tag":"param","type_ref":"prim:i32","fields":{"name":"x"},"loc":{"line":8,"col":30,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:8:30"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:9:21","file":"closure_make_call.sir","line":9,"col":21,"text":"  return i32.add(env, x)"}
{"ir":"sir-v1.0","k":"node","id":"n:9:0","tag":"name","type_ref":"prim:i32","fields":{"name":"env"},"loc":{"line":9,"col":21,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:9:21"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:9:24","file":"closure_make_call.sir","line":9,"col":24,"text":"  return i32.add(env, x)"}
{"ir":"sir-v1.0","k":"node","id":"n:9:1","tag":"name","type_ref":"prim:i32","fields":{"name":"x"},"loc":{"line":9,"col":24,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:9:24"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:10:1","file":"closure_make_call.sir","line":10,"col":1,"text":"end"}
{"ir":"sir-v1.0","k":"node","id":"n:10:0","tag":"i32.add","fields":{"args":[{"t":"ref","id":"n:9:0"},{"t":"ref","id":"n:9:1"}]},"loc":{"line":10,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:10:1"}
{"ir":"sir-v1.0","k":"node","id":"n:10:1","tag":"term.ret","fields":{"value":{"t":"ref","id":"n:10:0"}},"loc":{"line":10,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:10:1"}
{"ir":"sir-v1.0","k":"node","id":"n:10:2","tag":"block","fields":{"stmts":[{"t":"ref","id":"n:10:1"}]},"loc":{"line":10,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:10:1"}
{"ir":"sir-v1.0","k":"node","id":"n:10:3","tag":"fn","type_ref":"fn(prim:i32,prim:i32)->prim:i32","fields":{"name":"sir_add_env","linkage":"local","params":[{"t":"ref","id":"n:8:0"},{"t":"ref","id":"n:8:1"}],"body":{"t":"ref","id":"n:10:2"}},"loc":{"line":10,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:10:1"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:14:1","file":"closure_make_call.sir","line":14,"col":1,"text":"  let env: i32 = 5:i32"}
{"ir":"sir-v1.0","k":"node","id":"n:14:0","tag":"fun.sym","type_ref":"fun(fn(prim:i32,prim:i32)->prim:i32)","fields":{"name":"sir_add_env"},"loc":{"line":14,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:14:1"}
{"ir":"sir-v1.0","k":"node","id":"n:14:1","tag":"let","fields":{"name":"code","value":{"t":"ref","id":"n:14:0"}},"loc":{"line":14,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:14:1"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:15:1","file":"closure_make_call.sir","line":15,"col":1,"text":"  let cls: Cls = closure.make(code, env) as Cls"}
{"ir":"sir-v1.0","k":"node","id":"n:15:0","tag":"const.i32","type_ref":"prim:i32","fields":{"value":5},"loc":{"line":15,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:15:1"}
{"ir":"sir-v1.0","k":"node","id":"n:15:1","tag":"let","fields":{"name":"env","value":{"t":"ref","id":"n:15:0"}},"loc":{"line":15,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:15:1"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:15:35","file":"closure_make_call.sir","line":15,"col":35,"text":"  let cls: Cls = closure.make(code, env) as Cls"}
{"ir":"sir-v1.0","k":"node","id":"n:15:2","tag":"name","type_ref":"fun(fn(prim:i32,prim:i32)->prim:i32)","fields":{"name":"code"},"loc":{"line":15,"col":35,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:15:35"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:15:40","file":"closure_make_call.sir","line":15,"col":40,"text":"  let cls: Cls = closure.make(code, env) as Cls"}
{"ir":"sir-v1.0","k":"node","id":"n:15:3","tag":"name","type_ref":"prim:i32","fields":{"name":"env"},"loc":{"line":15,"col":40,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:15:40"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:16:1","file":"closure_make_call.sir","line":16,"col":1,"text":"  let x: i32 = 7:i32"}
{"ir":"sir-v1.0","k":"node","id":"n:16:0","tag":"closure.make","type_ref":"closure(fn(prim:i32)->prim:i32,prim:i32)","fields":{"args":[{"t":"ref","id":"n:15:2"},{"t":"ref","id":"n:15:3"}]},"loc":{"line":16,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:16:1"}
{"ir":"sir-v1.0","k":"node","id":"n:16:1","tag":"let","fields":{"name":"cls","value":{"t":"ref","id":"n:16:0"}},"loc":{"line":16,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:16:1"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:17:1","file":"closure_make_call.sir","line":17,"col":1,"text":"  return call.closure(cls, x) as i32"}
{"ir":"sir-v1.0","k":"node","id":"n:17:0","tag":"const.i32","type_ref":"prim:i32","fields":{"value":7},"loc":{"line":17,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:17:1"}
{"ir":"sir-v1.0","k":"node","id":"n:17:1","tag":"let","fields":{"name":"x","value":{"t":"ref","id":"n:17:0"}},"loc":{"line":17,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:17:1"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:17:26","file":"closure_make_call.sir","line":17,"col":26,"text":"  return call.closure(cls, x) as i32"}
{"ir":"sir-v1.0","k":"node","id":"n:17:2","tag":"name","type_ref":"closure(fn(prim:i32)->prim:i32,prim:i32)","fields":{"name":"cls"},"loc":{"line":17,"col":26,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:17:26"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:17:29","file":"closure_make_call.sir","line":17,"col":29,"text":"  return call.closure(cls, x) as i32"}
{"ir":"sir-v1.0","k":"node","id":"n:17:3","tag":"name","type_ref":"prim:i32","fields":{"name":"x"},"loc":{"line":17,"col":29,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:17:29"}
{"ir":"sir-v1.0","k":"src","id":"src:closure_make_call.sir:18:1","file":"closure_make_call.sir","line":18,"col":1,"text":"end"}
{"ir":"sir-v1.0","k":"node","id":"n:18:0","tag":"call.closure","type_ref":"prim:i32","fields":{"args":[{"t":"ref","id":"n:17:2"},{"t":"ref","id":"n:17:3"}]},"loc":{"line":18,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:18:1"}
{"ir":"sir-v1.0","k":"node","id":"n:18:1","tag":"term.ret","fields":{"value":{"t":"ref","id":"n:18:0"}},"loc":{"line":18,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:18:1"}
{"ir":"sir-v1.0","k":"type","id":"fn()->prim:i32","kind":"fn","params":[],"ret":"prim:i32","loc":{"line":18,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:18:1"}
{"ir":"sir-v1.0","k":"node","id":"n:18:2","tag":"block","fields":{"stmts":[{"t":"ref","id":"n:14:1"},{"t":"ref","id":"n:15:1"},{"t":"ref","id":"n:16:1"},{"t":"ref","id":"n:17:1"},{"t":"ref","id":"n:18:1"}]},"loc":{"line":18,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:18:1"}
{"ir":"sir-v1.0","k":"node","id":"n:18:3","tag":"fn","type_ref":"fn()->prim:i32","fields":{"name":"main","linkage":"public","params":[],"body":{"t":"ref","id":"n:18:2"}},"loc":{"line":18,"col":1,"unit":"closure_make_call.sir"},"src_ref":"src:closure_make_call.sir:18:1"}
