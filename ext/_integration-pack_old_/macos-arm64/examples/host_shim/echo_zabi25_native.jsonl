{"ir":"zasm-v1.1","k":"dir","d":"EXTERN","args":[{"t":"str","v":"c"},{"t":"str","v":"zi_read"},{"t":"sym","v":"zi_read"}],"loc":{"line":1}}
{"ir":"zasm-v1.1","k":"dir","d":"EXTERN","args":[{"t":"str","v":"c"},{"t":"str","v":"zi_write"},{"t":"sym","v":"zi_write"}],"loc":{"line":2}}
{"ir":"zasm-v1.1","k":"dir","d":"PUBLIC","args":[{"t":"sym","v":"zir_main"}],"loc":{"line":3}}

{"ir":"zasm-v1.1","k":"label","name":"zir_main","loc":{"line":5}}
{"ir":"zasm-v1.1","k":"instr","m":"DROP","ops":[{"t":"reg","v":"HL"}],"loc":{"line":5}}
{"ir":"zasm-v1.1","k":"label","name":"read_loop","loc":{"line":6}}

{"ir":"zasm-v1.1","k":"instr","m":"CALL","ops":[{"t":"sym","v":"zi_read"},{"t":"num","v":0},{"t":"sym","v":"buf"},{"t":"num","v":4096}],"loc":{"line":8}}
{"ir":"zasm-v1.1","k":"instr","m":"LD","ops":[{"t":"reg","v":"BC"},{"t":"reg","v":"HL"}],"loc":{"line":9}}
{"ir":"zasm-v1.1","k":"instr","m":"CP","ops":[{"t":"reg","v":"HL"},{"t":"num","v":0}],"loc":{"line":10}}
{"ir":"zasm-v1.1","k":"instr","m":"JR","ops":[{"t":"sym","v":"LE"},{"t":"lbl","v":"done"}],"loc":{"line":11}}

{"ir":"zasm-v1.1","k":"instr","m":"CALL","ops":[{"t":"sym","v":"zi_write"},{"t":"num","v":1},{"t":"sym","v":"buf"},{"t":"reg","v":"BC"}],"loc":{"line":13}}
{"ir":"zasm-v1.1","k":"instr","m":"JR","ops":[{"t":"lbl","v":"read_loop"}],"loc":{"line":14}}

{"ir":"zasm-v1.1","k":"label","name":"done","loc":{"line":16}}
{"ir":"zasm-v1.1","k":"instr","m":"LD","ops":[{"t":"reg","v":"HL"},{"t":"num","v":0}],"loc":{"line":17}}
{"ir":"zasm-v1.1","k":"instr","m":"RET","ops":[],"loc":{"line":18}}

{"ir":"zasm-v1.1","k":"dir","d":"RESB","name":"buf","args":[{"t":"num","v":4096}],"loc":{"line":20}}
